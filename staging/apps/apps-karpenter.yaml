application: karpenter
clusterConfig:
  namespace: karpenter
chart:
  name: karpenter
  releaseName: karpenter
  repoURL: public.ecr.aws/karpenter
  targetRevision: 1.4.0
  values: |
    webhook:
      enabled: true
      port: 8443
      metrics:
        port: 8001
    logLevel: info
    settings:
      clusterName: pilotgab-prod
      interruptionQueue: pilotgab-prod
      aws:
        defaultInstanceProfile: KarpenterNodeInstanceProfile-pilotgab-prod
        clusterEndpoint: REPLACE_WITH_YOUR_EKS_CLUSTER_ENDPOINT
    controller:
      resources:
        limits:
          cpu: 1
          memory: 2Gi
        requests:
          cpu: 1
          memory: 2Gi
      logLevel: info
    serviceAccount:
      annotations:
        eks.amazonaws.com/role-arn: arn:aws:iam::290793900072:role/pilotgab-prod-Karpenter-IRSA
    serviceMonitor:
      enabled: true
      additionalLabels:
        release: "kube-prometheus-stack"
    nodeSelector:
      eks.amazonaws.com/nodegroup: internal
    tolerations:
      - key: "internal"
        operator: "Equal"
        value: "critical"
        effect: "NoSchedule"
